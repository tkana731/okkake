<div class="min-h-screen bg-gradient-to-br from-blue-500 to-blue-600 lg:ml-64">
  <!-- „É¢„Éê„Ç§„É´Áî®„Éö„Éº„Ç∏„Éò„ÉÉ„ÉÄ„Éº -->
  <div class="lg:hidden bg-white/95 backdrop-blur-lg border-b border-white/30 p-4 flex items-center justify-between">
    <div class="flex items-center">
      <h1 class="text-lg font-bold text-blue-600">üëÄ ÂèñÂºïË©≥Á¥∞</h1>
    </div>
    <div class="flex gap-2">
      <%= link_to edit_transaction_path(@transaction), class: "bg-blue-500 text-white py-2 px-3 rounded-lg hover:bg-blue-600 transition-colors text-xs font-medium" do %>
        <i class="fas fa-edit"></i>
      <% end %>
      <%= link_to transactions_path, class: "bg-gray-500 text-white py-2 px-3 rounded-lg hover:bg-gray-600 transition-colors text-xs font-medium" do %>
        <i class="fas fa-arrow-left"></i>
      <% end %>
    </div>
  </div>

  <div class="w-full min-h-screen px-2 sm:px-4 lg:px-6 xl:px-8 py-4 sm:py-6 lg:py-8">
    
    <!-- „Éá„Çπ„ÇØ„Éà„ÉÉ„ÉóÁî®„Éò„ÉÉ„ÉÄ„Éº -->
    <div class="hidden lg:block bg-white/95 backdrop-blur-lg border border-white/30 rounded-xl lg:rounded-2xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center">
        <div>
          <h1 class="text-xl sm:text-2xl lg:text-3xl font-bold text-blue-600 mb-2">
            üëÄ ÂèñÂºïË©≥Á¥∞
          </h1>
          <p class="text-sm sm:text-base text-gray-600">ÂèñÂºïÂÜÖÂÆπ„ÅÆË©≥Á¥∞Ë°®Á§∫</p>
        </div>
        <div class="mt-4 sm:mt-0 flex flex-col sm:flex-row gap-2 sm:gap-3">
          <%= link_to edit_transaction_path(@transaction), 
                      class: "bg-blue-500 text-white py-2 sm:py-3 px-3 sm:px-4 rounded-lg hover:bg-blue-600 transition-colors text-center text-xs sm:text-sm font-medium" do %>
            <i class="fas fa-edit mr-1 sm:mr-2"></i>Á∑®ÈõÜ
          <% end %>
          <%= link_to transactions_path, 
                      class: "bg-gray-500 text-white py-2 sm:py-3 px-3 sm:px-4 rounded-lg hover:bg-gray-600 transition-colors text-center text-xs sm:text-sm font-medium" do %>
            <i class="fas fa-arrow-left mr-1 sm:mr-2"></i>‰∏ÄË¶ß„Å´Êàª„Çã
          <% end %>
        </div>
      </div>
    </div>

    <!-- „É°„Ç§„É≥Ë©≥Á¥∞ -->
    <div class="max-w-4xl mx-auto">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6">
        
        <!-- Âü∫Êú¨ÊÉÖÂ†± -->
        <div class="lg:col-span-2">
          <div class="bg-white/90 backdrop-blur-lg border border-white/50 rounded-xl lg:rounded-2xl p-4 sm:p-6 shadow-lg">
            <h2 class="text-lg sm:text-xl font-bold text-blue-600 mb-4 sm:mb-6 flex items-center">
              <i class="fas fa-info-circle mr-2 sm:mr-3"></i>
              Âü∫Êú¨ÊÉÖÂ†±
            </h2>

            <div class="space-y-4 sm:space-y-6">
              <!-- ÂèñÂºï„Çø„Ç§„Éó„Å®ÈáëÈ°ç -->
              <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 sm:p-6 bg-white/50 rounded-lg">
                <div class="mb-2 sm:mb-0">
                  <div class="flex items-center mb-2">
                    <% if @transaction.expense? %>
                      <i class="fas fa-minus-circle text-red-500 text-xl sm:text-2xl mr-3"></i>
                      <span class="text-lg sm:text-xl font-semibold text-red-700">ÊîØÂá∫</span>
                    <% else %>
                      <i class="fas fa-plus-circle text-green-500 text-xl sm:text-2xl mr-3"></i>
                      <span class="text-lg sm:text-xl font-semibold text-green-700">ÂèéÂÖ•</span>
                    <% end %>
                  </div>
                  <div class="text-sm text-gray-600">
                    <%= @transaction.formatted_date %>
                  </div>
                </div>
                <div class="text-right">
                  <div class="text-2xl sm:text-3xl font-bold <%= @transaction.expense? ? 'text-red-600' : 'text-green-600' %>">
                    <%= @transaction.formatted_signed_amount %>
                  </div>
                </div>
              </div>

              <!-- „Ç´„ÉÜ„Ç¥„É™ -->
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">„Ç´„ÉÜ„Ç¥„É™</label>
                  <div class="p-3 bg-white/50 rounded-lg">
                    <div class="flex items-center">
                      <span class="text-xl mr-3"><%= @transaction.category&.icon_or_default || 'üìù' %></span>
                      <span class="font-medium text-gray-800">
                        <%= @transaction.category&.display_name || 'Êú™ÂàÜÈ°û' %>
                      </span>
                    </div>
                  </div>
                </div>

                <!-- Ê∫ÄË∂≥Â∫¶ -->
                <% if @transaction.expense? && @transaction.satisfaction_rating %>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ê∫ÄË∂≥Â∫¶</label>
                    <div class="p-3 bg-white/50 rounded-lg">
                      <div class="flex items-center justify-between">
                        <div class="text-yellow-500">
                          <%= @transaction.satisfaction_stars %>
                        </div>
                        <div class="text-sm text-gray-600">
                          <%= @transaction.satisfaction_rating %>/5
                        </div>
                      </div>
                    </div>
                  </div>
                <% end %>
              </div>

              <!-- Â∫óËàóÂêç -->
              <% if @transaction.vendor.present? %>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Â∫óËàó„ÉªÂèñÂºïÂÖà</label>
                  <div class="p-3 bg-white/50 rounded-lg">
                    <div class="flex items-center">
                      <i class="fas fa-store text-gray-500 mr-3"></i>
                      <span class="font-medium text-gray-800"><%= @transaction.vendor %></span>
                    </div>
                  </div>
                </div>
              <% end %>

              <!-- „É°„É¢ -->
              <% if @transaction.memo.present? %>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">„É°„É¢</label>
                  <div class="p-3 bg-white/50 rounded-lg">
                    <div class="flex items-start">
                      <i class="fas fa-sticky-note text-gray-500 mr-3 mt-1"></i>
                      <p class="text-gray-800 leading-relaxed"><%= simple_format(@transaction.memo) %></p>
                    </div>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        </div>

        <!-- „Çµ„Ç§„Éâ„Éê„ÉºÊÉÖÂ†± -->
        <div class="space-y-4 sm:space-y-6">
          
          <!-- „Ç¢„ÇØ„Ç∑„Éß„É≥ -->
          <div class="bg-white/90 backdrop-blur-lg border border-white/50 rounded-xl lg:rounded-2xl p-4 sm:p-6 shadow-lg">
            <h3 class="text-lg font-bold text-blue-600 mb-4 flex items-center">
              <i class="fas fa-tools mr-2"></i>
              „Ç¢„ÇØ„Ç∑„Éß„É≥
            </h3>
            <div class="space-y-3">
              <%= link_to edit_transaction_path(@transaction), 
                          class: "w-full bg-blue-500 text-white py-2 sm:py-3 px-4 rounded-lg hover:bg-blue-600 transition-colors text-center text-sm font-medium flex items-center justify-center" do %>
                <i class="fas fa-edit mr-2"></i>Á∑®ÈõÜ
              <% end %>
              <%= link_to transaction_path(@transaction), 
                          method: :delete,
                          class: "w-full bg-red-500 text-white py-2 sm:py-3 px-4 rounded-lg hover:bg-red-600 transition-colors text-center text-sm font-medium flex items-center justify-center",
                          data: { 
                            confirm: "„Åì„ÅÆÂèñÂºï„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü„Åì„ÅÆÊìç‰Ωú„ÅØÂèñ„ÇäÊ∂à„Åõ„Åæ„Åõ„Çì„ÄÇ",
                            "turbo-method": :delete 
                          } do %>
                <i class="fas fa-trash mr-2"></i>ÂâäÈô§
              <% end %>
            </div>
          </div>

          <!-- Áµ±Ë®àÊÉÖÂ†± -->
          <div class="bg-white/90 backdrop-blur-lg border border-white/50 rounded-xl lg:rounded-2xl p-4 sm:p-6 shadow-lg">
            <h3 class="text-lg font-bold text-blue-600 mb-4 flex items-center">
              <i class="fas fa-chart-bar mr-2"></i>
              Èñ¢ÈÄ£Áµ±Ë®à
            </h3>
            <div class="space-y-4">
              <div class="text-center p-3 bg-white/50 rounded-lg">
                <div class="text-sm text-gray-600 mb-1">Âêå„Ç´„ÉÜ„Ç¥„É™„ÅÆ‰ªäÊúàÊîØÂá∫</div>
                <div class="text-lg font-bold text-blue-600">
                  ¬•<%= number_with_delimiter(current_user.transactions.where(category: @transaction.category).current_month.expense.sum(:amount).to_i) %>
                </div>
              </div>
              
              <% if @transaction.expense? %>
                <div class="text-center p-3 bg-white/50 rounded-lg">
                  <div class="text-sm text-gray-600 mb-1">‰ªäÊúà„ÅÆÁ∑èÊîØÂá∫</div>
                  <div class="text-lg font-bold text-red-600">
                    ¬•<%= number_with_delimiter(current_user.current_month_expenses.to_i) %>
                  </div>
                </div>
              <% end %>
            </div>
          </div>

          <!-- ‰ΩúÊàê„ÉªÊõ¥Êñ∞Êó•ÊôÇ -->
          <div class="bg-white/90 backdrop-blur-lg border border-white/50 rounded-xl lg:rounded-2xl p-4 sm:p-6 shadow-lg">
            <h3 class="text-lg font-bold text-blue-600 mb-4 flex items-center">
              <i class="fas fa-clock mr-2"></i>
              Â±•Ê≠¥
            </h3>
            <div class="space-y-3 text-sm">
              <div class="flex justify-between">
                <span class="text-gray-600">‰ΩúÊàêÊó•ÊôÇ:</span>
                <span class="text-gray-800"><%= @transaction.created_at.strftime('%Y/%m/%d %H:%M') %></span>
              </div>
              <% if @transaction.created_at != @transaction.updated_at %>
                <div class="flex justify-between">
                  <span class="text-gray-600">Êõ¥Êñ∞Êó•ÊôÇ:</span>
                  <span class="text-gray-800"><%= @transaction.updated_at.strftime('%Y/%m/%d %H:%M') %></span>
                </div>
              <% end %>
            </div>
          </div>

        </div>
      </div>
    </div>

  </div>
</div>

<!-- „É¨„Çπ„Éù„É≥„Ç∑„ÉñÁî®„ÅÆ„Ç´„Çπ„Çø„É†„Çπ„Çø„Ç§„É´ -->
<style>
  /* Ë∂Ö„ÉØ„Ç§„Éâ„Çπ„ÇØ„É™„Éº„É≥Áî®„ÅÆË™øÊï¥ */
  @media (min-width: 1536px) {
    .w-full {
      max-width: 1536px;
      margin: 0 auto;
    }
  }
</style>